{"is_source_file": true, "format": "JavaScript", "description": "This file contains utility functions for storing and retrieving game state, scores, preferences, and last move data for a 2048 game. It uses localStorage with safeguards for environments where localStorage isn't available.", "external_files": [], "external_methods": ["window.localStorage.setItem", "window.localStorage.getItem", "window.localStorage.removeItem"], "published": ["isStorageAvailable", "getBestScore", "setBestScore", "getLastState", "setLastState", "clearLastState", "getPreferences", "setPreferences"], "classes": [], "methods": [{"name": "isStorageAvailable()", "description": "Checks whether localStorage is available and functional in the current environment.", "scope": "", "scopeKind": ""}, {"name": "getBestScore()", "description": "Retrieves the best score from localStorage or returns 0 if unavailable or invalid.", "scope": "", "scopeKind": ""}, {"name": "setBestScore(score)", "description": "Stores the provided score as the best score in localStorage.", "scope": "", "scopeKind": ""}, {"name": "getLastState()", "description": "Retrieves the last saved game state, including the game board and score.", "scope": "", "scopeKind": ""}, {"name": "setLastState(state)", "description": "Saves the current game state, including the game board and score, to localStorage.", "scope": "", "scopeKind": ""}, {"name": "clearLastState()", "description": "Removes the stored last game state from localStorage.", "scope": "", "scopeKind": ""}, {"name": "getPreferences()", "description": "Retrieves user preferences stored in localStorage, returning defaults if not available or invalid.", "scope": "", "scopeKind": ""}, {"name": "setPreferences(prefs)", "description": "Persists user preferences to localStorage, merging with existing preferences.", "scope": "", "scopeKind": ""}], "calls": ["window.localStorage.setItem", "window.localStorage.getItem", "window.localStorage.removeItem"], "search-terms": ["localStorage", "game storage", "score storage", "preferences storage", "2048"], "state": 2, "file_id": 19, "knowledge_revision": 72, "git_revision": "ba93d25d30301a092b9c6a4289999ad8db6d0810", "revision_history": [{"43": ""}, {"71": "ba93d25d30301a092b9c6a4289999ad8db6d0810"}, {"72": "ba93d25d30301a092b9c6a4289999ad8db6d0810"}], "ctags": [{"_type": "tag", "name": "BEST_SCORE_KEY", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^const BEST_SCORE_KEY = \"2048_best_score\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LAST_STATE_KEY", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^const LAST_STATE_KEY = \"2048_last_state\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PREFS_KEY", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^const PREFS_KEY = \"2048_prefs_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "animationsEnabled", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^    animationsEnabled: typeof prefs.animationsEnabled === \"boolean\" ? prefs.animationsEnabled : /", "language": "JavaScript", "kind": "property", "scope": "setPreferences.next", "scopeKind": "class"}, {"_type": "tag", "name": "clearLastState", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function clearLastState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getBestScore", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function getBestScore() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLastState", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function getLastState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getPreferences", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function getPreferences() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "highContrastTiles", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^    highContrastTiles: typeof prefs.highContrastTiles === \"boolean\" ? prefs.highContrastTiles : /", "language": "JavaScript", "kind": "property", "scope": "setPreferences.next", "scopeKind": "class"}, {"_type": "tag", "name": "isStorageAvailable", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function isStorageAvailable() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^  const next = {$/", "language": "JavaScript", "kind": "class", "scope": "setPreferences", "scopeKind": "class"}, {"_type": "tag", "name": "setBestScore", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function setBestScore(score) {$/", "language": "JavaScript", "kind": "function", "signature": "(score)"}, {"_type": "tag", "name": "setLastState", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function setLastState(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "setPreferences", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^export function setPreferences(prefs) {$/", "language": "JavaScript", "kind": "function", "signature": "(prefs)"}, {"_type": "tag", "name": "undoDepth", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/game/storage.js", "pattern": "/^    undoDepth: Math.min(5, Math.max(1, Number(prefs.undoDepth ?? current.undoDepth))),$/", "language": "JavaScript", "kind": "property", "scope": "setPreferences.next", "scopeKind": "class"}], "hash": "b027a04862be789d112f8608afa59c86", "format-version": 4, "code-base-name": "2048_game_frontend", "filename": "2048_game_frontend/src/game/storage.js", "fields": [{"name": "animationsEnabled: typeof prefs.animationsEnabled === \"boolean\" ? prefs.animationsEnabled : /", "scope": "setPreferences.next", "scopeKind": "class", "description": "unavailable"}, {"name": "highContrastTiles: typeof prefs.highContrastTiles === \"boolean\" ? prefs.highContrastTiles : /", "scope": "setPreferences.next", "scopeKind": "class", "description": "unavailable"}, {"name": "undoDepth: Math.min(5, Math.max(1, Number(prefs.undoDepth ?? current.undoDepth))),", "scope": "setPreferences.next", "scopeKind": "class", "description": "unavailable"}]}