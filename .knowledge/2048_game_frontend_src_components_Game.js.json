{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines the 'Game' React component, which manages and renders the main game logic and UI for a 2048 puzzle game. It handles state management, input controls (keyboard and touch), game logic (move, undo, restart), and UI rendering of the game board, score, and controls.", "external_files": ["../game/constants", "../game/move", "../game/board", "../game/storage", "./Board", "./ScorePanel", "./Controls", "../hooks/useEventListener", "../hooks/useSwipe", "../App.css"], "external_methods": ["makeEmptyBoard", "spawnRandomTile", "cloneBoard", "move", "canMergeOrMove", "getMaxTile", "getBestScore", "setBestScore", "getLastState", "setLastState", "clearLastState", "getPreferences", "setPreferences"], "published": ["Game"], "classes": [], "methods": [{"name": "handleRestart", "description": "Initializes a new game state, optionally clearing saved state, and spawns initial tiles."}, {"name": "releaseLockSoon", "description": "Releases the move animation lock after the estimated animation duration to prevent overlapping moves."}, {"name": "afterMoveHousekeeping", "description": "Handles post-move activities: spawning new tile, updating state, checking game over/win, and updating UI messages."}, {"name": "handleMove", "description": "Processes move actions in a given direction; updates game state accordingly, manages move lock, and triggers post-move activities."}, {"name": "handleUndo", "description": "Undoes the last move by restoring the previous game state from history."}, {"name": "Game()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["useEffect", "setPreferences", "setHistory", "setBestScore", "setLastState", "spawnRandomTile", "getMaxTile", "canMergeOrMove", "move", "pushHistory", "setBoard", "setScore", "setGameOver", "setGameWon", "setStatusMessage", "setLastAction", "clearLastState"], "search-terms": ["2048", "Game component", "move handling", "restart game", "undo feature", "touch input", "keyboard controls", "game state management", "score tracking", "game over detection"], "state": 2, "file_id": 20, "knowledge_revision": 87, "git_revision": "47d5061a0161c31fd59a143356e56ae6d07895c5", "revision_history": [{"45": ""}, {"66": "01b3905b7551ab254c04a9c27637e53e659c1fa0"}, {"79": "2f1eb8bc11278e3959b3be27d2ba5f64f4bf5e08"}, {"80": "2f1eb8bc11278e3959b3be27d2ba5f64f4bf5e08"}, {"81": "2f1eb8bc11278e3959b3be27d2ba5f64f4bf5e08"}, {"82": "2f1eb8bc11278e3959b3be27d2ba5f64f4bf5e08"}, {"87": "47d5061a0161c31fd59a143356e56ae6d07895c5"}], "ctags": [{"_type": "tag", "name": "Game", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^function Game() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            board={board}$/", "language": "JavaScript", "kind": "field", "scope": "Game.board", "scopeKind": "class"}, {"_type": "tag", "name": "gameOver", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            gameOver={gameOver}$/", "language": "JavaScript", "kind": "field", "scope": "Game.gameOver", "scopeKind": "class"}, {"_type": "tag", "name": "gameWon", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            gameWon={gameWon}$/", "language": "JavaScript", "kind": "field", "scope": "Game.gameWon", "scopeKind": "class"}, {"_type": "tag", "name": "handleUndo", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            onUndo={handleUndo}$/", "language": "JavaScript", "kind": "field", "scope": "Game.onUndo", "scopeKind": "class"}, {"_type": "tag", "name": "history", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            isUndoDisabled={history.length === 0}$/", "language": "JavaScript", "kind": "field", "scope": "Game.isUndoDisabled", "scopeKind": "class"}, {"_type": "tag", "name": "lastSpawnRef", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            lastSpawn={lastSpawnRef.current}$/", "language": "JavaScript", "kind": "field", "scope": "Game.lastSpawn", "scopeKind": "class"}, {"_type": "tag", "name": "maxTile", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            maxTile={maxTile}$/", "language": "JavaScript", "kind": "field", "scope": "Game.maxTile", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            animationsEnabled={settings.animationsEnabled}$/", "language": "JavaScript", "kind": "field", "scope": "Game.animationsEnabled", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            highContrast={settings.highContrastTiles}$/", "language": "JavaScript", "kind": "field", "scope": "Game.highContrast", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            isAnimating={settings.animationsEnabled ? isAnimatingRef.current : false}$/", "language": "JavaScript", "kind": "field", "scope": "Game.isAnimating", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            settings={settings}$/", "language": "JavaScript", "kind": "field", "scope": "Game.settings", "scopeKind": "class"}, {"_type": "tag", "name": "swipeRef", "path": "/home/kavia/workspace/code-generation/2048-puzzle-game-29620-29629/2048_game_frontend/src/components/Game.js", "pattern": "/^            ref={swipeRef}$/", "language": "JavaScript", "kind": "field", "scope": "Game.ref", "scopeKind": "class"}], "hash": "c7da8bbcf6f0fd54704989a4d87ee0e3", "format-version": 4, "code-base-name": "2048_game_frontend", "filename": "2048_game_frontend/src/components/Game.js", "fields": [{"name": "board={board}", "scope": "Game.board", "scopeKind": "class", "description": "unavailable"}, {"name": "gameOver={gameOver}", "scope": "Game.gameOver", "scopeKind": "class", "description": "unavailable"}, {"name": "gameWon={gameWon}", "scope": "Game.gameWon", "scopeKind": "class", "description": "unavailable"}, {"name": "onUndo={handleUndo}", "scope": "Game.onUndo", "scopeKind": "class", "description": "unavailable"}, {"name": "isUndoDisabled={history.length === 0}", "scope": "Game.isUndoDisabled", "scopeKind": "class", "description": "unavailable"}, {"name": "lastSpawn={lastSpawnRef.current}", "scope": "Game.lastSpawn", "scopeKind": "class", "description": "unavailable"}, {"name": "maxTile={maxTile}", "scope": "Game.maxTile", "scopeKind": "class", "description": "unavailable"}, {"name": "animationsEnabled={settings.animationsEnabled}", "scope": "Game.animationsEnabled", "scopeKind": "class", "description": "unavailable"}, {"name": "highContrast={settings.highContrastTiles}", "scope": "Game.highContrast", "scopeKind": "class", "description": "unavailable"}, {"name": "isAnimating={settings.animationsEnabled ? isAnimatingRef.current : false}", "scope": "Game.isAnimating", "scopeKind": "class", "description": "unavailable"}, {"name": "settings={settings}", "scope": "Game.settings", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={swipeRef}", "scope": "Game.ref", "scopeKind": "class", "description": "unavailable"}]}